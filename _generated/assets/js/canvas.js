'use strict';

module.exports = function (canvasID, starsAmount) {
  var color = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '#000000';
  var radius = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  var lineWidth = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.05;

  var canvas = document.getElementById(canvasID),
      ctx = canvas.getContext('2d');

  canvas.width = document.getElementById(canvasID).offsetWidth;
  canvas.height = document.getElementById(canvasID).offsetHeight;

  var stars = [],
      // Array that contains the stars
  FPS = 60,
      // Frames per second
  x = starsAmount,
      // Number of stars
  mouse = {
    x: 0,
    y: 0
  }; // mouse location

  // Push stars to array

  for (var i = 0; i < x; i++) {
    stars.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      radius: Math.random() * radius + radius,
      vx: Math.floor(Math.random() * 50) - 25,
      vy: Math.floor(Math.random() * 50) - 25
    });
  }

  canvas.addEventListener('mousemove', function (e) {
    mouse.x = e.clientX;
    mouse.y = e.clientY;
  });

  // Draw the scene

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.globalCompositeOperation = "lighter";

    for (var i = 0, x = stars.length; i < x; i++) {
      var s = stars[i];

      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.radius, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = color;
      ctx.stroke();
    }

    ctx.beginPath();
    for (var i = 0, x = stars.length; i < x; i++) {
      var starI = stars[i];
      ctx.moveTo(starI.x, starI.y);
      if (distance(mouse, starI) < 150) ctx.lineTo(mouse.x, mouse.y);
      for (var j = 0, x = stars.length; j < x; j++) {
        var starII = stars[j];
        if (distance(starI, starII) < 150) {
          //ctx.globalAlpha = (1 / 150 * distance(starI, starII).toFixed(1));
          ctx.lineTo(starII.x, starII.y);
        }
      }
    }
    ctx.lineWidth = lineWidth;
    ctx.strokeStyle = color;
    ctx.stroke();
  }

  function distance(point1, point2) {
    var xs = 0;
    var ys = 0;

    xs = point2.x - point1.x;
    xs = xs * xs;

    ys = point2.y - point1.y;
    ys = ys * ys;

    return Math.sqrt(xs + ys);
  }

  // Update star locations

  function update() {
    for (var i = 0, x = stars.length; i < x; i++) {
      var s = stars[i];

      s.x += s.vx / FPS;
      s.y += s.vy / FPS;

      if (s.x < 0 || s.x > canvas.width) s.vx = -s.vx;
      if (s.y < 0 || s.y > canvas.height) s.vy = -s.vy;
    }
  }

  // Update and draw

  function tick() {
    draw();
    update();
    requestAnimationFrame(tick);
  }

  tick();
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbnZhcy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiY2FudmFzSUQiLCJzdGFyc0Ftb3VudCIsImNvbG9yIiwicmFkaXVzIiwibGluZVdpZHRoIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwic3RhcnMiLCJGUFMiLCJ4IiwibW91c2UiLCJ5IiwiaSIsInB1c2giLCJNYXRoIiwicmFuZG9tIiwidngiLCJmbG9vciIsInZ5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjbGllbnRYIiwiY2xpZW50WSIsImRyYXciLCJjbGVhclJlY3QiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJsZW5ndGgiLCJzIiwiZmlsbFN0eWxlIiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJmaWxsIiwic3Ryb2tlIiwic3RhckkiLCJtb3ZlVG8iLCJkaXN0YW5jZSIsImxpbmVUbyIsImoiLCJzdGFySUkiLCJzdHJva2VTdHlsZSIsInBvaW50MSIsInBvaW50MiIsInhzIiwieXMiLCJzcXJ0IiwidXBkYXRlIiwidGljayIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQUEsT0FBT0MsT0FBUCxHQUFpQixVQUFVQyxRQUFWLEVBQW9CQyxXQUFwQixFQUFrRjtBQUFBLE1BQWpEQyxLQUFpRCx1RUFBekMsU0FBeUM7QUFBQSxNQUE5QkMsTUFBOEIsdUVBQXJCLENBQXFCO0FBQUEsTUFBbEJDLFNBQWtCLHVFQUFOLElBQU07O0FBQ2pHLE1BQUlDLFNBQVNDLFNBQVNDLGNBQVQsQ0FBd0JQLFFBQXhCLENBQWI7QUFBQSxNQUNFUSxNQUFNSCxPQUFPSSxVQUFQLENBQWtCLElBQWxCLENBRFI7O0FBR0FKLFNBQU9LLEtBQVAsR0FBZUosU0FBU0MsY0FBVCxDQUF3QlAsUUFBeEIsRUFBa0NXLFdBQWpE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LDBCQUFzQkQsSUFBdEI7QUFDRDs7QUFHREE7QUFFRCxDQTVHRCIsImZpbGUiOiJjYW52YXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjYW52YXNJRCwgc3RhcnNBbW91bnQsIGNvbG9yID0gJyMwMDAwMDAnLCByYWRpdXMgPSAxLCBsaW5lV2lkdGggPSAwLjA1KSB7XG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNJRCksXG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgY2FudmFzLndpZHRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSUQpLm9mZnNldFdpZHRoO1xuICBjYW52YXMuaGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSUQpLm9mZnNldEhlaWdodDtcblxuICB2YXIgc3RhcnMgPSBbXSwgLy8gQXJyYXkgdGhhdCBjb250YWlucyB0aGUgc3RhcnNcbiAgICBGUFMgPSA2MCwgLy8gRnJhbWVzIHBlciBzZWNvbmRcbiAgICB4ID0gc3RhcnNBbW91bnQsIC8vIE51bWJlciBvZiBzdGFyc1xuICAgIG1vdXNlID0ge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDBcbiAgICB9OyAvLyBtb3VzZSBsb2NhdGlvblxuXG4gIC8vIFB1c2ggc3RhcnMgdG8gYXJyYXlcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHg7IGkrKykge1xuICAgIHN0YXJzLnB1c2goe1xuICAgICAgeDogTWF0aC5yYW5kb20oKSAqIGNhbnZhcy53aWR0aCxcbiAgICAgIHk6IE1hdGgucmFuZG9tKCkgKiBjYW52YXMuaGVpZ2h0LFxuICAgICAgcmFkaXVzOiBNYXRoLnJhbmRvbSgpICogcmFkaXVzICsgcmFkaXVzLFxuICAgICAgdng6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwKSAtIDI1LFxuICAgICAgdnk6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUwKSAtIDI1XG4gICAgfSk7XG4gIH1cblxuICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSkge1xuICAgIG1vdXNlLnggPSBlLmNsaWVudFg7XG4gICAgbW91c2UueSA9IGUuY2xpZW50WTtcbiAgfSk7XG5cbiAgLy8gRHJhdyB0aGUgc2NlbmVcblxuICBmdW5jdGlvbiBkcmF3KCkge1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImxpZ2h0ZXJcIjtcblxuICAgIGZvciAodmFyIGkgPSAwLCB4ID0gc3RhcnMubGVuZ3RoOyBpIDwgeDsgaSsrKSB7XG4gICAgICB2YXIgcyA9IHN0YXJzW2ldO1xuXG4gICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHguYXJjKHMueCwgcy55LCBzLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgY3R4LmZpbGwoKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIHggPSBzdGFycy5sZW5ndGg7IGkgPCB4OyBpKyspIHtcbiAgICAgIHZhciBzdGFySSA9IHN0YXJzW2ldO1xuICAgICAgY3R4Lm1vdmVUbyhzdGFySS54LCBzdGFySS55KTtcbiAgICAgIGlmIChkaXN0YW5jZShtb3VzZSwgc3RhckkpIDwgMTUwKSBjdHgubGluZVRvKG1vdXNlLngsIG1vdXNlLnkpO1xuICAgICAgZm9yICh2YXIgaiA9IDAsIHggPSBzdGFycy5sZW5ndGg7IGogPCB4OyBqKyspIHtcbiAgICAgICAgdmFyIHN0YXJJSSA9IHN0YXJzW2pdO1xuICAgICAgICBpZiAoZGlzdGFuY2Uoc3RhckksIHN0YXJJSSkgPCAxNTApIHtcbiAgICAgICAgICAvL2N0eC5nbG9iYWxBbHBoYSA9ICgxIC8gMTUwICogZGlzdGFuY2Uoc3RhckksIHN0YXJJSSkudG9GaXhlZCgxKSk7XG4gICAgICAgICAgY3R4LmxpbmVUbyhzdGFySUkueCwgc3RhcklJLnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGN0eC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgY3R4LnN0cm9rZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGlzdGFuY2UocG9pbnQxLCBwb2ludDIpIHtcbiAgICB2YXIgeHMgPSAwO1xuICAgIHZhciB5cyA9IDA7XG5cbiAgICB4cyA9IHBvaW50Mi54IC0gcG9pbnQxLng7XG4gICAgeHMgPSB4cyAqIHhzO1xuXG4gICAgeXMgPSBwb2ludDIueSAtIHBvaW50MS55O1xuICAgIHlzID0geXMgKiB5cztcblxuICAgIHJldHVybiBNYXRoLnNxcnQoeHMgKyB5cyk7XG4gIH1cblxuICAvLyBVcGRhdGUgc3RhciBsb2NhdGlvbnNcblxuICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHggPSBzdGFycy5sZW5ndGg7IGkgPCB4OyBpKyspIHtcbiAgICAgIHZhciBzID0gc3RhcnNbaV07XG5cbiAgICAgIHMueCArPSBzLnZ4IC8gRlBTO1xuICAgICAgcy55ICs9IHMudnkgLyBGUFM7XG5cbiAgICAgIGlmIChzLnggPCAwIHx8IHMueCA+IGNhbnZhcy53aWR0aCkgcy52eCA9IC1zLnZ4O1xuICAgICAgaWYgKHMueSA8IDAgfHwgcy55ID4gY2FudmFzLmhlaWdodCkgcy52eSA9IC1zLnZ5O1xuICAgIH1cbiAgfVxuXG5cblxuICAvLyBVcGRhdGUgYW5kIGRyYXdcblxuICBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGRyYXcoKTtcbiAgICB1cGRhdGUoKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG4gIH1cblxuXG4gIHRpY2soKTtcbiAgXG59XG5cbiJdfQ==
